_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[90],{27:function(e,t,r){r("j36g"),e.exports=r("m87k")},"4JlD":function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?a(i(e),(function(i){var s=encodeURIComponent(n(i))+r;return o(e[i])?a(e[i],(function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[i]))})).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},QmWs:function(e,t,r){var n,o=(n=r("s4NR"))&&"object"==typeof n&&"default"in n?n.default:n,a=/https?|ftp|gopher|file/;function i(e){"string"==typeof e&&(e=j(e));var t=function(e,t,r){var n=e.auth,o=e.hostname,a=e.protocol||"",i=e.pathname||"",s=e.hash||"",c=e.query||"",l=!1;n=n?encodeURIComponent(n).replace(/%3A/i,":")+"@":"",e.host?l=n+e.host:o&&(l=n+(~o.indexOf(":")?"["+o+"]":o),e.port&&(l+=":"+e.port)),c&&"object"==typeof c&&(c=t.encode(c));var h=e.search||c&&"?"+c||"";return a&&":"!==a.substr(-1)&&(a+=":"),e.slashes||(!a||r.test(a))&&!1!==l?(l="//"+(l||""),i&&"/"!==i[0]&&(i="/"+i)):l||(l=""),s&&"#"!==s[0]&&(s="#"+s),h&&"?"!==h[0]&&(h="?"+h),{protocol:a,host:l,pathname:i=i.replace(/[?#]/g,encodeURIComponent),search:h=h.replace("#","%23"),hash:s}}(e,o,a);return""+t.protocol+t.host+t.pathname+t.search+t.hash}var s="http://",c="w.w",l=s+c,h=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,p=/https?|ftp|gopher|file/;function u(e,t){var r="string"==typeof e?j(e):e;e="object"==typeof e?i(e):e;var n=j(t),o="";r.protocol&&!r.slashes&&(o=r.protocol,e=e.replace(r.protocol,""),o+="/"===t[0]||"/"===e[0]?"/":""),o&&n.protocol&&(o="",n.slashes||(o=n.protocol,t=t.replace(n.protocol,"")));var a=e.match(h);a&&!n.protocol&&(e=e.substr((o=a[1]+(a[2]||"")).length),/^\/\/[^/]/.test(t)&&(o=o.slice(0,-1)));var c=new URL(e,l+"/"),u=new URL(t,c).toString().replace(l,""),d=n.protocol||r.protocol;return d+=r.slashes||n.slashes?"//":"",!o&&d?u=u.replace(s,d):o&&(u=u.replace(s,"")),p.test(u)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==u.slice(-1)||(u=u.slice(0,-1)),o&&(u=o+("/"===u[0]?u.substr(1):u)),u}function d(){}d.prototype.parse=j,d.prototype.format=i,d.prototype.resolve=u,d.prototype.resolveObject=u;var f=/^https?|ftp|gopher|file/,m=/^(.*?)([#?].*)/,g=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,b=/^([a-z0-9.+-]*:)?\/\/\/*/i,x=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function j(e,t,r){if(void 0===t&&(t=!1),void 0===r&&(r=!1),e&&"object"==typeof e&&e instanceof d)return e;var n=(e=e.trim()).match(m);e=n?n[1].replace(/\\/g,"/")+n[2]:e.replace(/\\/g,"/"),x.test(e)&&"/"!==e.slice(-1)&&(e+="/");var a=!/(^javascript)/.test(e)&&e.match(g),s=b.test(e),h="";a&&(f.test(a[1])||(h=a[1].toLowerCase(),e=""+a[2]+a[3]),a[2]||(s=!1,f.test(a[1])?(h=a[1],e=""+a[3]):e="//"+a[3]),3!==a[2].length&&1!==a[2].length||(h=a[1],e="/"+a[3]));var p,u=(n?n[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),j=u&&u[1],v=new d,w="",y="";try{p=new URL(e)}catch(o){w=o,h||r||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(y="/",e=e.substr(1));try{p=new URL(e,l)}catch(e){return v.protocol=h,v.href=h,v}}v.slashes=s&&!y,v.host=p.host===c?"":p.host,v.hostname=p.hostname===c?"":p.hostname.replace(/(\[|\])/g,""),v.protocol=w?h||null:p.protocol,v.search=p.search.replace(/\\/g,"%5C"),v.hash=p.hash.replace(/\\/g,"%5C");var O=e.split("#");!v.search&&~O[0].indexOf("?")&&(v.search="?"),v.hash||""!==O[1]||(v.hash="#"),v.query=t?o.decode(p.search.substr(1)):v.search.substr(1),v.pathname=y+(a?function(e){return e.replace(/['^|`]/g,(function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()})).replace(/((?:%[0-9A-F]{2})+)/g,(function(e,t){try{return decodeURIComponent(t).split("").map((function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()})).join("")}catch(e){return t}}))}(p.pathname):p.pathname),"about:"===v.protocol&&"blank"===v.pathname&&(v.protocol="",v.pathname=""),w&&"/"!==e[0]&&(v.pathname=v.pathname.substr(1)),h&&!f.test(h)&&"/"!==e.slice(-1)&&"/"===v.pathname&&(v.pathname=""),v.path=v.pathname+v.search,v.auth=[p.username,p.password].map(decodeURIComponent).filter(Boolean).join(":"),v.port=p.port,j&&!v.host.endsWith(j)&&(v.host+=j,v.port=j.slice(1)),v.href=y?""+v.pathname+v.search+v.hash:i(v);var k=/^(file)/.test(v.href)?["host","hostname"]:[];return Object.keys(v).forEach((function(e){~k.indexOf(e)||(v[e]=v[e]||null)})),v}t.parse=j,t.format=i,t.resolve=u,t.resolveObject=function(e,t){return j(u(e,t))},t.Url=d},"W/yk":function(e,t,r){"use strict";var n=r("QmWs");t.a=function(e,t){var r=e.host,o=e.protocol,a=t?Object(n.parse)(t,!0):{query:{},pathname:"/"},i=a.query,s=a.pathname;return Object(n.format)({protocol:o,host:r,pathname:s,query:i})}},kd2E:function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,a){t=t||"&",r=r||"=";var i={};if("string"!==typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var c=1e3;a&&"number"===typeof a.maxKeys&&(c=a.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var h=0;h<l;++h){var p,u,d,f,m=e[h].replace(s,"%20"),g=m.indexOf(r);g>=0?(p=m.substr(0,g),u=m.substr(g+1)):(p=m,u=""),d=decodeURIComponent(p),f=decodeURIComponent(u),n(i,d)?o(i[d])?i[d].push(f):i[d]=[i[d],f]:i[d]=f}return i};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},m87k:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return r("qIq5")}])},mImh:function(e,t,r){"use strict";function n(e,t){if(!e)return null;var r=e[t];return r?Array.isArray(r)?null:r:null}r.d(t,"a",(function(){return n}))},qIq5:function(e,t,r){"use strict";r.r(t);var n=r("vJKn"),o=r.n(n),a=r("rg98"),i=r("nKUr"),s=r("H+61"),c=r("UlJF"),l=r("+Css"),h=r("7LId"),p=r("VIvw"),u=r("iHvq"),d=r("cpVT"),f=r("MX0m"),m=r.n(f),g=r("q1tI"),b=r.n(g),x=r("20a2"),j=r.n(x),v=r("/MKj"),w=r("2SQs"),y=r.n(w),O=r("YFqc"),k=r.n(O),C=r("RVZx"),U=r("RwKQ"),R=function(e){var t=e.title;return Object(i.jsxs)("header",{className:"jsx-3975438191 auth-header",children:[Object(i.jsx)("div",{className:"jsx-3975438191 auth-header-logo",children:Object(i.jsx)("div",{className:"jsx-3975438191",children:Object(i.jsx)(k.a,{href:"/",children:Object(i.jsx)("a",{className:"jsx-3975438191 auth-header-logo-link",children:Object(i.jsx)(U.a,{})})})})}),Object(i.jsx)("div",{className:"jsx-3975438191 auth-header-title",children:t}),Object(i.jsx)(m.a,{id:"3975438191",children:[".auth-header.jsx-3975438191{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 25px;background-color:rgb(244,244,244);border-bottom:1px solid rgb(228,228,228);height:60px;}",".auth-header-logo-link.jsx-3975438191{display:block;width:auto;height:28px;color:var(--color-foreground-1);overflow:hidden;-webkit-text-decoration:none;text-decoration:none;}",".auth-header-logo.jsx-3975438191,.auth-header-nav.jsx-3975438191{width:70px;}",".auth-header-title.jsx-3975438191{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;text-align:center;font-weight:normal;color:rgb(153,153,153);font-size:130%;}","@media (min-width:400px){.auth-header-logo-link.jsx-3975438191{width:116px;}}"]})]})},I=function(e){var t=e.heading,r=e.subHeading;return Object(i.jsxs)("div",{className:"jsx-2149188480 auth-welcome-header",children:[Object(i.jsx)("div",{className:"jsx-2149188480 auth-welcome-heading",children:t}),r&&Object(i.jsx)("div",{className:"jsx-2149188480 auth-welcome-subheading",children:r}),Object(i.jsx)(m.a,{id:"2149188480",children:[".auth-welcome-header.jsx-2149188480{width:100%;-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;background-color:rgb(81,146,179);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:200px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-bottom:20px;}",".auth-welcome-heading.jsx-2149188480{font-size:44px;color:rgb(255,255,255);font-weight:100;white-space:nowrap;width:75%;overflow:hidden;text-overflow:ellipsis;text-align:center;}",".auth-welcome-subheading.jsx-2149188480{font-size:20px;font-weight:400;margin-top:5px;color:rgba(255,255,255,0.5);}"]})]})},N=function(e){var t=e.children,r=e.title,n=e.description,o=e.image;return Object(i.jsxs)(C.a,{title:r,description:n,image:o,style:{paddingTop:0},noFooter:!0,noHeader:!0,children:[Object(i.jsx)(R,{title:r}),Object(i.jsx)("div",{className:"jsx-3112361673 auth-layout-content",children:t}),Object(i.jsx)(m.a,{id:"3112361673",children:[".auth-layout-content.jsx-3112361673{min-height:100vh;padding-top:60px;margin-top:-60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]})]})},S=r("8TBL"),q=r("ArsQ"),A=r("3gM7"),L=function(){return{href:"/home",as:"/~"}},_=r("W/yk"),E=r("mImh"),T=r("9PDL");function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(p.a)(this,r)}}var z=new Map([["staging.repl.it","staging.replit.com"],["staging.replit.com","staging.repl.it"],["repl.it","replit.com"],["replit.com","repl.it"],["localhost:3000","auth-token-through.kochman.repl.co"],["replit.dev","auth-token-through.kochman.repl.co"]]),M=function(e){Object(h.a)(r,e);var t=P(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),Object(d.a)(Object(l.a)(e),"handleSubmit",(function(t){if("error"in t&&t.error)e.props.showMessage({content:t.error,type:"error",time:3e3});else{if(!("user"in t)||!t.user)throw new Error("Expected error or user object");var r=e.state.isLogin;e.props.showMessage({content:"".concat(r?"Login":"Signup"," Successful"),type:"confirm",time:2e3});var n=e.props.router.query,o=r&&!t.social||t.social&&!t.newUser,a=Object(E.a)(n,"goto"),i=z.get(window.location.host);if(r&&!t.social&&t.user.authToken&&i){var s="https://".concat(i,"/auth/token?authToken=").concat(t.user.authToken,"&redirect=");if(a)s+=encodeURIComponent(Object(_.a)(window.location,a));else{var c=L().as;s+=encodeURIComponent(window.location.origin+c)}window.location.href=s}else{if(o){if(a)window.location.href=Object(_.a)(window.location,a);else{var l=L(),h=l.href,p=l.as;j.a.push(h,p)}return}if(a)window.location.href=Object(_.a)(window.location,a);else{var u=Object(T.a)(t.user,"flag-janus2");window.location.href=u?"/welcome":"/~?onboarding=1"+("landing"===j.a.query.from?"&from=landing":"")}}}})),Object(d.a)(Object(l.a)(e),"handleChangeAuth",(function(){var t=e.props.router.query;e.setState((function(e){return{isLogin:!e.isLogin}}),(function(){var r=e.state.isLogin?"/login":"/signup";j.a.push({pathname:"/auth",query:t},{pathname:r,query:t},{shallow:!0})}))})),e}return Object(c.a)(r,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.router.asPath;if(e){var t=e.includes("/login");this.setState({isLogin:t})}}},{key:"render",value:function(){var e=y()(this.props.router.query,"path"),t="teacher"in e,r=e,n=r.title,o=r.description,a=r.image,s=this.state.isLogin?"Log In":"Sign Up";return Object(i.jsxs)(N,{title:n||s,description:o,image:a,children:[e.googleClassroom&&Object(i.jsx)(I,{heading:"Welcome to Teams for Education",subHeading:"Please use your Google account to join your team"}),Object(i.jsx)(S.a,{email:e.email?e.email.toString():void 0,isLogin:this.state.isLogin,isTeacher:t,onSubmit:this.handleSubmit,onChangeAuth:this.handleChangeAuth,privacyInvite:e.invite?e.invite.toString():void 0,randomUsername:e.randomUsername?e.randomUsername.toString():void 0,googleClassroom:Boolean(e.googleClassroom)}),Object(i.jsx)("div",{className:"jsx-1690702153 hcaptcha-disclaimer",children:Object(i.jsxs)("p",{className:"jsx-1690702153",children:["This site is protected by hCaptcha and its"," ",Object(i.jsx)("a",{href:"https://hcaptcha.com/privacy",className:"jsx-1690702153",children:"Privacy Policy"})," and"," ",Object(i.jsx)("a",{href:"https://hcaptcha.com/terms",className:"jsx-1690702153",children:"Terms of Service"})," apply."]})}),Object(i.jsx)(m.a,{id:"1690702153",children:[".hcaptcha-disclaimer.jsx-1690702153{font-size:14px;max-width:280px;height:60px;text-align:center;}"]})]})}}],[{key:"getInitialProps",value:function(){var e=Object(a.a)(o.a.mark((function e(t){var r,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.req,n=t.store,r){e.next=7;break}return e.next=4,Object(A.a)(r,n);case 4:a=e.sent,a.user&&j.a.replace("/replsDashboard",{pathname:"/repls"});case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(b.a.Component);t.default=Object(v.c)(null,{showMessage:q.b})(M)},s4NR:function(e,t,r){"use strict";t.decode=t.parse=r("kd2E"),t.encode=t.stringify=r("4JlD")}},[[27,1,0,2,3,4,5,6,7,8,9,25]]]);
//# sourceMappingURL=auth-30c3a41c11a7c34cb5ee.js.map